{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/eol-prime-sandbox/src/lib/mongo.ts"],"sourcesContent":["// src/lib/mongo.ts\r\nimport { MongoClient } from \"mongodb\";\r\n\r\nconst uri = process.env.MONGODB_URI;\r\n\r\nif (!uri) {\r\n  console.log(\"MONGODB_URI not set â€” running in DEMO MODE (in-memory mock)\");\r\n}\r\n\r\nlet clientPromise: Promise<MongoClient>;\r\n\r\n// === DEMO MODE: In-memory mock ===\r\nif (!uri) {\r\n  const mockDb = {\r\n    collection: () => ({\r\n      findOne: async () => null,\r\n      insertOne: async (doc: any) => ({\r\n        insertedId: `mock-${Date.now()}`,\r\n        ...doc,\r\n      }),\r\n      updateOne: async () => ({ modifiedCount: 1 }),\r\n      deleteOne: async () => ({ deletedCount: 1 }),\r\n      find: () => ({\r\n        toArray: async () => [],\r\n      }),\r\n    }),\r\n  };\r\n\r\n  const mockClient = {\r\n    db: () => mockDb,\r\n    close: async () => {},\r\n  } as unknown as MongoClient;\r\n\r\n  clientPromise = Promise.resolve(mockClient);\r\n}\r\n// === REAL DB: Connect ===\r\nelse {\r\n  const client = new MongoClient(uri);\r\n  clientPromise = client.connect().catch((err) => {\r\n    console.error(\"MongoDB connection failed:\", err);\r\n    process.exit(1);\r\n  });\r\n}\r\n\r\nexport { clientPromise };\r\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;AACnB;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AAEnC,IAAI,CAAC,KAAK;IACR,QAAQ,GAAG,CAAC;AACd;AAEA,IAAI;AAEJ,oCAAoC;AACpC,IAAI,CAAC,KAAK;IACR,MAAM,SAAS;QACb,YAAY,IAAM,CAAC;gBACjB,SAAS,UAAY;gBACrB,WAAW,OAAO,MAAa,CAAC;wBAC9B,YAAY,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;wBAChC,GAAG,GAAG;oBACR,CAAC;gBACD,WAAW,UAAY,CAAC;wBAAE,eAAe;oBAAE,CAAC;gBAC5C,WAAW,UAAY,CAAC;wBAAE,cAAc;oBAAE,CAAC;gBAC3C,MAAM,IAAM,CAAC;wBACX,SAAS,UAAY,EAAE;oBACzB,CAAC;YACH,CAAC;IACH;IAEA,MAAM,aAAa;QACjB,IAAI,IAAM;QACV,OAAO,WAAa;IACtB;IAEA,gBAAgB,QAAQ,OAAO,CAAC;AAClC,OAEK;IACH,MAAM,SAAS,IAAI,sHAAW,CAAC;IAC/B,gBAAgB,OAAO,OAAO,GAAG,KAAK,CAAC,CAAC;QACtC,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,QAAQ,IAAI,CAAC;IACf;AACF","debugId":null}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/eol-prime-sandbox/src/lib/authOptions.ts"],"sourcesContent":["// src/lib/authOptions.ts\r\nimport { NextAuthOptions } from \"next-auth\";\r\nimport EmailProvider from \"next-auth/providers/email\";\r\nimport { MongoDBAdapter } from \"@next-auth/mongodb-adapter\";\r\nimport { clientPromise } from \"@/lib/mongo\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n  adapter: MongoDBAdapter(clientPromise),\r\n\r\n  // Use DB sessions (MongoDBAdapter will manage the sessions collection)\r\n  session: { strategy: \"database\" },\r\n\r\n  providers: [\r\n    EmailProvider({\r\n      server: {\r\n        host: process.env.EMAIL_SERVER_HOST!,\r\n        port: Number(process.env.EMAIL_SERVER_PORT!),\r\n        auth: {\r\n          user: process.env.EMAIL_SERVER_USER!,\r\n          pass: process.env.EMAIL_SERVER_PASSWORD!,\r\n        },\r\n      },\r\n      from: process.env.EMAIL_FROM!,\r\n      // Magic link validity (seconds). Adjust if you want longer links.\r\n      maxAge: 10 * 60,\r\n    }),\r\n  ],\r\n\r\n  pages: {\r\n    signIn: \"/signin\", // OK if you have this page; otherwise remove\r\n    verifyRequest: \"/signin/verify\",\r\n  },\r\n\r\n  callbacks: {\r\n    session: ({ session, token }) => {\r\n      if (session.user && token.sub) {\r\n        session.user.id = token.sub;\r\n      }\r\n      return session;\r\n    },\r\n  },\r\n};\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AAEzB;AACA;AACA;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,yLAAc,EAAC,sIAAa;IAErC,uEAAuE;IACvE,SAAS;QAAE,UAAU;IAAW;IAEhC,WAAW;QACT,IAAA,+JAAa,EAAC;YACZ,QAAQ;gBACN,MAAM,QAAQ,GAAG,CAAC,iBAAiB;gBACnC,MAAM,OAAO,QAAQ,GAAG,CAAC,iBAAiB;gBAC1C,MAAM;oBACJ,MAAM,QAAQ,GAAG,CAAC,iBAAiB;oBACnC,MAAM,QAAQ,GAAG,CAAC,qBAAqB;gBACzC;YACF;YACA,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,kEAAkE;YAClE,QAAQ,KAAK;QACf;KACD;IAED,OAAO;QACL,QAAQ;QACR,eAAe;IACjB;IAEA,WAAW;QACT,SAAS,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE;YAC1B,IAAI,QAAQ,IAAI,IAAI,MAAM,GAAG,EAAE;gBAC7B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;IACF;AACF","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/eol-prime-sandbox/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["export const runtime = \"nodejs\";\r\n\r\nimport NextAuth from \"next-auth\";\r\nimport { authOptions } from \"@/lib/authOptions\";\r\n\r\nconst handler = NextAuth(authOptions);\r\nexport { handler as GET, handler as POST };\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AAHO,MAAM,UAAU;;;AAKvB,MAAM,UAAU,IAAA,kJAAQ,EAAC,0IAAW","debugId":null}}]
}