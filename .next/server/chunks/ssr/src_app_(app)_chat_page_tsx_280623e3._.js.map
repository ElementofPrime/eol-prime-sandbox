{"version":3,"sources":["turbopack:///[project]/node_modules/clsx/dist/clsx.mjs","turbopack:///[project]/src/app/(app)/chat/page.tsx","turbopack:///[project]/src/components/SceneFortress.tsx","turbopack:///[project]/src/components/PrimeAura.tsx"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","// src/app/(app)/chat/page.tsx\r\n\"use client\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useSession, signIn } from \"next-auth/react\";\r\nimport SceneFortress from \"@/components/SceneFortress\";\r\nimport PrimeAura from \"@/components/PrimeAura\";\r\nimport DemoNotice from \"@/components/DemoNotice\";\r\n\r\n// Remove: import { cn } from \"src/lib/utils\"; // ← NOT USED\r\n\r\ntype Msg = { role: \"user\" | \"assistant\"; content: string };\r\ntype Tone = \"calm\" | \"excited\" | \"reflective\" | \"stressed\" | \"neutral\";\r\n\r\nexport default function ChatPage() {\r\n  const { status } = useSession();\r\n  const isAuthed = status === \"authenticated\";\r\n\r\n  const [messages, setMessages] = useState<Msg[]>([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [tone, setTone] = useState<Tone>(\"neutral\");\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const streamAbortRef = useRef<AbortController | null>(null);\r\n\r\n  // === WELCOME MESSAGE ON MOUNT ===\r\n  useEffect(() => {\r\n    if (messages.length === 0) {\r\n      setMessages([\r\n        {\r\n          role: \"assistant\",\r\n          content:\r\n            \"Welcome to the Fortress of Prime — a calm, sovereign space for clarity and growth. When you're ready, share what’s on your mind and I’ll meet you there.\",\r\n        },\r\n      ]);\r\n    }\r\n  }, [messages.length]);\r\n\r\n  // === AUTO-SCROLL ON NEW CONTENT ===\r\n  useEffect(() => {\r\n    const el = scrollRef.current;\r\n    if (!el) return;\r\n    const id = requestAnimationFrame(() =>\r\n      el.scrollTo({ top: el.scrollHeight, behavior: \"smooth\" })\r\n    );\r\n    return () => cancelAnimationFrame(id);\r\n  }, [messages, loading]);\r\n\r\n  // === TONE ANALYSIS ===\r\n  async function analyzeTone(text: string) {\r\n    try {\r\n      const r = await fetch(\"/api/pulse\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ text }),\r\n      });\r\n      if (!r.ok) return setTone(\"neutral\");\r\n      const j = await r.json();\r\n      if (j?.tone) setTone(j.tone as Tone);\r\n    } catch {\r\n      setTone(\"neutral\");\r\n    }\r\n  }\r\n\r\n  // === SEND MESSAGE WITH STREAMING ===\r\n  async function sendMessage() {\r\n    const trimmed = input.trim();\r\n    if (!trimmed || loading) return;\r\n    if (trimmed.length > 2000) {\r\n      setError(\"Message is too long (max 2000 characters).\");\r\n      return;\r\n    }\r\n\r\n    const userCount = messages.filter((m) => m.role === \"user\").length;\r\n    if (!isAuthed && userCount >= 5) {\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content:\r\n            \"Limit reached (5 chats). Create an account or sign in to unlock full access, memory, and the full Fortress experience.\",\r\n        },\r\n      ]);\r\n      return;\r\n    }\r\n\r\n    streamAbortRef.current?.abort();\r\n    const controller = new AbortController();\r\n    streamAbortRef.current = controller;\r\n\r\n    const userMsg: Msg = { role: \"user\", content: trimmed };\r\n    setMessages((prev) => [\r\n      ...prev,\r\n      userMsg,\r\n      { role: \"assistant\", content: \"\" },\r\n    ]);\r\n    setInput(\"\");\r\n    setError(null);\r\n    setLoading(true);\r\n    analyzeTone(trimmed);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/prime\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ messages: [...messages, userMsg] }),\r\n        signal: controller.signal,\r\n      });\r\n      if (!res.ok || !res.body) throw new Error(`Prime endpoint ${res.status}`);\r\n\r\n      const reader = res.body.getReader();\r\n      const decoder = new TextDecoder();\r\n      let acc = \"\";\r\n      let raf = 0;\r\n\r\n      const pump = async () => {\r\n        try {\r\n          while (true) {\r\n            const { value, done } = await reader.read();\r\n            if (done) break;\r\n            acc += decoder.decode(value, { stream: true });\r\n\r\n            if (!raf) {\r\n              raf = requestAnimationFrame(() => {\r\n                setMessages((prev) => {\r\n                  const next = [...prev];\r\n                  const last = next.length - 1;\r\n                  if (last >= 0 && next[last].role === \"assistant\") {\r\n                    next[last] = {\r\n                      role: \"assistant\",\r\n                      content: acc,\r\n                    };\r\n                  }\r\n                  return next;\r\n                });\r\n                raf = 0;\r\n              });\r\n            }\r\n          }\r\n        } finally {\r\n          if (raf) cancelAnimationFrame(raf);\r\n        }\r\n      };\r\n\r\n      await pump();\r\n\r\n      setMessages((prev) => {\r\n        const next = [...prev];\r\n        const last = next.length - 1;\r\n        if (last >= 0 && next[last].role === \"assistant\") {\r\n          next[last] = { role: \"assistant\", content: acc || \"…\" };\r\n        }\r\n        return next;\r\n      });\r\n\r\n      analyzeTone(acc);\r\n    } catch (e: any) {\r\n      if (e?.name === \"AbortError\") return;\r\n      setMessages((prev) => [\r\n        ...prev.slice(0, -1),\r\n        {\r\n          role: \"assistant\",\r\n          content:\r\n            \"I hit a snag reaching the Prime endpoint. Try again in a moment, or check your connection.\",\r\n        },\r\n      ]);\r\n      setError(e?.message ?? \"Request failed.\");\r\n    } finally {\r\n      setLoading(false);\r\n      streamAbortRef.current = null;\r\n    }\r\n  }\r\n\r\n  const onKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const unauthReachedLimit =\r\n    !isAuthed && messages.filter((m) => m.role === \"user\").length >= 5;\r\n\r\n  return (\r\n    <main className=\"relative min-h-svh pt-24 md:pt-28 bg-slate-50 dark:bg-slate-950\">\r\n      <SceneFortress />\r\n\r\n      {/* === GUEST BANNER === */}\r\n      {status !== \"authenticated\" && (\r\n        <div className=\"mx-auto w-full max-w-3xl px-4\">\r\n          <div className=\"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-black/80 backdrop-blur p-4 text-sm text-slate-700 dark:text-slate-300\">\r\n            <span className=\"mr-2\">Warning</span>\r\n            Limited to <strong>5 chats</strong>.{\" \"}\r\n            <span className=\"opacity-90\">\r\n              Create an account or sign in to access full features.\r\n            </span>\r\n            <button\r\n              onClick={() => signIn()}\r\n              className=\"ml-3 rounded-lg bg-cyan-600 px-3 py-1 text-white hover:bg-cyan-500\"\r\n            >\r\n              Sign in\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* === SAVE CONVERSATION BANNER === */}\r\n      {!isAuthed && messages.length > 0 && !unauthReachedLimit && (\r\n        <div className=\"mx-auto max-w-3xl px-4 mb-4\">\r\n          <div className=\"rounded-xl border border-cyan-500/30 bg-cyan-500/10 p-4 text-center\">\r\n            <p className=\"text-cyan-900 dark:text-cyan-200 text-sm\">\r\n              Sign in to <strong>save this conversation</strong> and continue\r\n              with Prime anytime.\r\n            </p>\r\n            <button\r\n              onClick={() => signIn()}\r\n              className=\"mt-2 text-xs underline text-cyan-700 dark:text-cyan-300 hover:text-cyan-900\"\r\n            >\r\n              Sign in now\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* === PRIME REMEMBERS YOU === */}\r\n      {isAuthed && messages.length > 0 && (\r\n        <div className=\"mx-auto max-w-3xl px-4 mb-4\">\r\n          <div className=\"flex items-center justify-center gap-2 text-emerald-600 dark:text-emerald-400 text-sm font-medium\">\r\n            <span className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"></span>\r\n            Prime remembers you. The light within your Tree is glowing brighter\r\n            every day.\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* === CHAT LOG === */}\r\n      <div\r\n        ref={scrollRef}\r\n        className=\"mx-auto h-[calc(100svh-220px)] w-full max-w-3xl overflow-y-auto px-4 pb-40 md:pb-48 scrollbar-thin\"\r\n      >\r\n        <div className=\"mb-6 text-center text-[11px] tracking-widest text-slate-700 dark:text-slate-200/70 uppercase\">\r\n          Within these walls — Truth & Light always win.\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {messages.map((m, i) => {\r\n            const isUser = m.role === \"user\";\r\n            const isAssistant = m.role === \"assistant\";\r\n\r\n            return (\r\n              <div\r\n                key={i}\r\n                className={clsx(\r\n                  \"max-w-xs rounded-2xl px-4 py-3 border\",\r\n                  isUser\r\n                    ? \"mr-auto bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-100 border-slate-200 dark:border-slate-700\"\r\n                    : \"ml-auto bg-cyan-500/20 dark:bg-cyan-600/20 text-cyan-700 dark:text-cyan-300 border-cyan-500/30 dark:border-cyan-600/30\"\r\n                )}\r\n                aria-live={\r\n                  i === messages.length - 1 && isAssistant\r\n                    ? \"polite\"\r\n                    : undefined\r\n                }\r\n              >\r\n                <PrimeAura tone={tone} />\r\n                <div className=\"relative whitespace-pre-wrap\">{m.content}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* === LOADING / ERROR / LIMIT === */}\r\n        {loading && (\r\n          <div className=\"mr-auto max-w-[85%] rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-black/60 px-5 py-3 text-slate-600 dark:text-slate-400 backdrop-blur animate-pulse\">\r\n            Prime is focusing…\r\n          </div>\r\n        )}\r\n\r\n        {error && !loading && (\r\n          <div className=\"mr-auto max-w-[85%] rounded-2xl border border-rose-400/30 bg-rose-500/10 px-5 py-3 text-sm text-rose-700 dark:text-rose-300\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {unauthReachedLimit && (\r\n          <div className=\"mx-auto max-w-3xl px-4 mb-6\">\r\n            <div className=\"rounded-2xl border border-amber-500/30 bg-linear-to-r from-amber-500/10 to-orange-500/10 p-5 text-center\">\r\n              <p className=\"text-amber-900 dark:text-amber-200 font-semibold mb-3\">\r\n                You've reached the guest limit (5 messages).\r\n              </p>\r\n              <p className=\"text-sm text-amber-800 dark:text-amber-300 mb-4\">\r\n                Unlock{\" \"}\r\n                <strong>unlimited chat, memory, and your Tree of Life</strong>{\" \"}\r\n                with SuperGrok.\r\n              </p>\r\n              <button\r\n                onClick={() => signIn()}\r\n                className=\"rounded-xl bg-linear-to-r from-emerald-600 to-cyan-600 px-6 py-3 text-white font-bold hover:from-emerald-700 hover:to-cyan-700 transition-all shadow-lg\"\r\n              >\r\n                Upgrade Now — $9/mo\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* === INPUT DOCK === */}\r\n      <div className=\"fixed inset-x-0 bottom-0 z-10\">\r\n        <div className=\"mx-auto w-full max-w-3xl px-4 pb-5\">\r\n          <div className=\"relative rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-black/80 backdrop-blur p-3\">\r\n            <PrimeAura tone={tone} />\r\n            <textarea\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              onKeyDown={onKeyDown}\r\n              placeholder=\"Speak to Prime within the safety of the Fortress…\"\r\n              className=\"min-h-[60px] w-full resize-none rounded-xl bg-white/70 dark:bg-black/70 p-3 text-slate-900 dark:text-slate-100 placeholder:text-slate-500 dark:placeholder:text-slate-400 focus:outline-none focus-visible:outline-2 focus-visible:outline-cyan-500 focus-visible:outline-offset-2\"\r\n            />\r\n            <div className=\"mt-2 flex items-center justify-end gap-2\">\r\n              <button\r\n                onClick={sendMessage}\r\n                disabled={loading || unauthReachedLimit}\r\n                className=\"rounded-xl bg-cyan-600 dark:bg-cyan-700 px-5 py-2 text-sm font-medium text-white hover:bg-cyan-500 dark:hover:bg-cyan-600 transition-all\"\r\n              >\r\n                {loading ? \"Sending…\" : \"Send to Prime\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-3 text-center text-[11px] text-slate-700 dark:text-slate-200/70\">\r\n            “Prime is here to help you navigate safely. The world is full of\r\n            deception and deepfakes — we don’t fall for any of it.”\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","// src/components/SceneFortress.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\n\r\nfunction useIsMobile(breakpoint = 768) {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const mq = window.matchMedia(`(max-width: ${breakpoint}px)`);\r\n    const handler = () => setIsMobile(mq.matches);\r\n    handler();\r\n    mq.addEventListener(\"change\", handler);\r\n    return () => mq.removeEventListener(\"change\", handler);\r\n  }, [breakpoint]);\r\n  return isMobile;\r\n}\r\n\r\nexport default function SceneFortress() {\r\n  const isMobile = useIsMobile(768);\r\n  const src = isMobile\r\n    ? \"/assets/fortress-bg-portrait.webp\"\r\n    : \"/assets/fortress-bg-desktop.webp\";\r\n\r\n  const [hasImg, setHasImg] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const img = new window.Image();\r\n    img.src = src;\r\n    img.onload = () => setHasImg(true);\r\n    img.onerror = () => setHasImg(false);\r\n  }, [src]);\r\n\r\n  return (\r\n    <div\r\n      aria-hidden\r\n      className=\"pointer-events-none fixed inset-0 -z-10 overflow-hidden\"\r\n    >\r\n      <div className=\"absolute inset-0 bg-[radial-gradient(60%_60%_at_50%_20%,#87a7c766_0%,#0b122099_60%,transparent_100%)]\" />\r\n      <div className=\"absolute inset-0 opacity-30 bg-[url('/assets/starfield.png')] bg-repeat\" />\r\n\r\n      {hasImg && (\r\n        <div className=\"absolute inset-0\">\r\n          <Image\r\n            src={src}\r\n            alt=\"\"\r\n            fill\r\n            priority\r\n            className=\"object-cover opacity-90 select-none\"\r\n            sizes=\"100vw\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-linear-to-t from-slate-900/80 via-transparent to-transparent\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/components/PrimeAura.tsx\r\n\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\n\r\ntype Tone = \"calm\" | \"excited\" | \"reflective\" | \"stressed\" | \"neutral\";\r\n\r\ninterface PrimeAuraProps {\r\n  tone?: Tone;\r\n}\r\n\r\nexport default function PrimeAura({ tone = \"neutral\" }: PrimeAuraProps) {\r\n  const toneClass = useMemo(() => {\r\n    switch (tone) {\r\n      case \"calm\":\r\n        return \"from-cyan-300/25 via-cyan-500/15 to-transparent\";\r\n      case \"excited\":\r\n        return \"from-amber-300/25 via-amber-500/15 to-transparent\";\r\n      case \"reflective\":\r\n        return \"from-sky-300/25 via-blue-400/15 to-transparent\";\r\n      case \"stressed\":\r\n        return \"from-violet-400/25 via-fuchsia-500/10 to-transparent\";\r\n      default:\r\n        return \"from-slate-300/20 via-slate-500/10 to-transparent\";\r\n    }\r\n  }, [tone]);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <div\r\n        className={`pointer-events-none absolute -inset-6 rounded-3xl bg-linear-to-br ${toneClass}`}\r\n        aria-hidden=\"true\"\r\n      />\r\n      <div className=\"relative\">{/* content goes here */}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}